!function(e){"use strict";var t=e.module("common.extensions",[]);t.directive("bubbling",["$parse",function(e){return{restrict:"A",compile:function(){return{post:function(t,n,r){function i(n){if("{"==n[0]){var r={};return t.$watch(n,function(t){Object.keys(t).forEach(function(n){r[n]||(r[n]=e(n).assign),r[n](u,t[n])})},!0),!0}return!1}function o(n){if("["==n[0]){var r=[];n.substring(1,n.length-1).split(",").forEach(function(t){r.push(e(t).assign)}),t.$watchCollection(n,function(e){for(var t=0;t<e.length;t++)r[t](u,e[t])})}}function c(e){return-1!=e.indexOf(",")?(e.split(",").forEach(function(e){s(e)||a(e)}),!0):!1}function s(n){var r=n.match(/^(.+)\sas\s(.+)$/i);if(r){var i=e(r[2]).assign;return t.$watch(r[1],function(e){i(u,e)}),!0}return!1}function a(n){var r=e(n).assign;t.$watch(n,function(e){r(u,e)})}var u=t.$parent;if(!u){var l=n.parent();for(u=l.data("$scope");!u||u===t;){if(l=l.parent(),!l||!l.length)return;u=l.data("$scope")}}var f=String(r.bubbling).trim();i(f)||o(f)||c(f)||s(f)||a(f)}}}}}]),t.directive("injectService",["$injector","$parse",function(e,t){return{restrict:"A",scope:!0,compile:function(){return{pre:function(n,r,i){var o=i.injectService;if(o){var c=o.split(",");c.forEach(function(r){var i=r.match(/^\s*(([_a-z0-9$]+).*?)(?:\sas\s(.+))?$/i);if(!i)throw new Error('Unsupported inject-service syntax "'+r+'"');var o=i[2],c=e.get(o),s=i[1],a={};a[o]=c;var u=t(s)(n,a),l=i[3];t(l?l:o).assign(n,u)})}}}}}}]),t.directive("scopeChild",[function(){return{scope:!0,restrict:"AE"}}]),t.directive("selector",["EventEmitterFactory","$parse",function(e,t){function n(){e.apply(this),this.toggle=function(e){this.isSelected(e)?this.unselect(e):this.select(e)}}function r(){n.apply(this),this.type="single",this.selected=void 0,this.reset=function(e){this.selected=e},this.isSelected=function(e){return this.selected===e},this.select=function(e){this.isSelected(e)||(this.selected=e,this.emit("change",this.selected))},this.unselect=function(e){this.isSelected(e)&&(this.selected=void 0,this.emit("change",this.selected))}}function i(){n.apply(this),this.type="list",this.selected=[],this.reset=function(e){this.selected=c(e)?e:e?[e]:[]},this.isSelected=function(e){return-1!==this.selected.indexOf(e)},this.select=function(e){this.isSelected(e)||(this.selected.push(e),this.emit("change",this.selected))},this.unselect=function(e){this.isSelected(e)&&(this.selected.splice(this.selected.indexOf(e),1),this.emit("change",this.selected))}}function o(){n.apply(this),this.type="map",this.selected={},this.reset=function(e){this.selected=s(e)?e:e?Object(e):{}},this.isSelected=function(e){return this.selected.hasOwnProperty(e)&&this.selected[e]},this.select=function(e,t){this.isSelected(e)||(this.selected[e]="undefined"==typeof t?!0:t,this.emit("change",this.selected))},this.unselect=function(e){this.isSelected(e)&&(delete this.selected[e],this.emit("change",this.selected))},this.toggle=function(e,t){this.isSelected(e)?this.unselect(e):this.select(e,t)}}function c(e){return Array.isArray(e)}function s(e){return null!=e&&"object"==typeof e}return{restrict:"A",require:"selector",controller:["$scope","$attrs",function(e,t){switch(t.selectorType){case"list":i.apply(this);break;case"map":o.apply(this);break;default:r.apply(this)}}],compile:function(){return{pre:function(e,n,r,i){function o(e){i.reset(e),i.emit("change",i.selected)}var c;switch(r.selectorType){case"list":c=e.$watchCollection(r.selector,o);break;case"map":c=e.$watch(r.selector,o,!0);break;default:c=e.$watch(r.selector,o)}var s=t(r.selector).assign,a=i.on("change",function(t){s(e,t)});e.$on("$destroy",function(){c(),a()})}}}}}]),t.directive("selectorOption",["$animate",function(e){return{restrict:"A",require:["selectorOption","^selector"],controller:["$scope","$element","$attrs","EventEmitterFactory",function(e,t,n,r){var i=t.controller("selector");r.apply(this),["select","unselect","toggle"].forEach(function(e){this[e]=function(){i[e].apply(i,this.getValue())}}.bind(this)),this.selected=!1,this.getValue=function(){var t=n.selectorOption.match(/^(.+)\sas\s(.+)$/i);return t?[e.$eval(t[1]),e.$eval(t[2])]:[e.$eval(n.selectorOption)]},this.refresh=function(){var e=i.isSelected(this.getValue()[0]);e!=this.selected&&this.emit("change",this.selected=e)};var o=i.on("change",this.refresh.bind(this));e.$on("$destroy",o)}],link:function(t,n,r,i){function o(){return r.selectorOptionDisabled&&t.$eval(r.selectorOptionDisabled)}var c=i[0],s=i[1];r.selectorOptionBind||n.on("click",function(){o()||t.$apply(function(){var e="single"!=s.type;r.selectorOptionToggle&&(e=t.$eval(r.selectorOptionToggle)),c[e?"toggle":"select"]()})});var a=c.on("change",function(t){e[t?"addClass":"removeClass"](n,"ng-selected")});t.$on("$destroy",a),s.isSelected(c.getValue()[0])&&c.refresh()}}}]),t.directive("selectorOptionBind",["$parse",function(e){return{restrict:"A",require:"selectorOption",link:function(t,n,r,i){t.$watch(r.selectorOptionBind,function(e){i[e?"select":"unselect"]()});var o=e(r.selectorOptionBind),c=o.assign,s=i.on("change",function(e){var n=o(t);(n&&!e||!n&&e)&&c(t,e)});t.$on("$destroy",s)}}}]),t.directive("shift",["$animate",function(e){return{restrict:"AE",priority:400,terminal:!0,transclude:"element",link:function(t,n,r,i,o){function c(){a(u),u=s()}function s(){var r={};return r.scope=t.$new(),o(r.scope,function(t){r.element=t,r.element.addClass("ng-shift ng-shift-enter"),e.enter(t,n.parent(),n)}),r}function a(t){t.element&&(t.element.removeClass("ng-shift-enter"),t.element.addClass("ng-shift-leave"),e.leave(t.element),delete t.element),t.scope&&(t.scope.$destroy(),delete t.scope)}var u=s();t.$watch(r.shift||r.value,function(e,t){e!==t&&c()})}}}]),t.factory("EventEmitterFactory",[function(){return function(e){return e=e||(this!==window?this:{}),e.listeners={},e.emit=function(t,n){var r,i,o=Array.prototype.slice.call(arguments,1);if(this.listeners[t])for(r=this.listeners[t].slice(),i=0;i<r.length;i++)r[i].apply(e,o)},e.on=function(e,t){var n,r,i=this;return n=e.split(/\s+/).filter(function(e){return e}),n.length>1?(r=n.map(function(e){return i.on(e,t)}),function(){r.forEach(function(e){e()})}):(e=n[0],this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),function(){i.off(e,t)})},e.off=function(e,t){var n,r,i=this;if(n=e.split(/\s+/).filter(function(e){return e}),n.length>1)return void n.forEach(function(e){i.off(e,t)});if(e=n[0],this.listeners[e])for(r=0;r<this.listeners[e].length;)this.listeners[e][r]===t?this.listeners[e].splice(r,1):r++},e.once=function(e,t){var n=this.on(e,function(){t.apply(this,arguments),n()});return n},e}}]),t.filter("length",function(){return function(e){return e instanceof Array?e.length:e?e instanceof String?e.length:Object.keys(e).length:0}}),t.factory("ensureDigest",["$rootScope",function(e){var t;return t=function(t){var n,r=!1;t&&"function"==typeof t?n=t:t&&(r=!0),n?e.$$phase?n():e.$apply(n):e.$$phase||(r?e.$evalAsync():e.$digest())}}]),t.factory("localStorage",["$window",function(e){try{return e.localStorage||{}}catch(t){return{}}}]),t.factory("localStorageStore",["localStorage",function(t){return{get:function(n){var r=t[n];return r?e.fromJson(r):r},put:function(n,r){t[n]=e.toJson(r)},remove:function(e){delete t[e]}}}]),t.factory("sessionStorage",["$window",function(e){try{return e.sessionStorage||{}}catch(t){return{}}}]),t.factory("sessionStorageStore",["sessionStorage",function(e){return{get:function(t){var n=e[t];try{return n?JSON.parse(n):n}catch(r){return void 0}},put:function(t,n){e[t]=JSON.stringify(n)},remove:function(t){delete e[t]}}}])}(angular),!function(e){"use strict";var t=e.module("common.config",[]);t.provider("config",function(){function e(e){function t(e,n){return!e||!n||"object"!=typeof e||"object"!=typeof n||Array.isArray(e)||Array.isArray(n)||e instanceof Date||n instanceof Date?n:(Object.keys(n).forEach(function(r){e[r]=e.hasOwnProperty(r)?t(e[r],n[r]):n[r]}),e)}for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.reduce(function(e,n){return t(e,n)},e)}var t,n,r={},i={};return t=function(){},t.prototype=r,i=new t,n=function(e){n.append(e)},n.add=function(e){return i=e||{}},n.append=function(t){return i=e(i||{},t||{})},n.defaults=function(t){return r=e(r||{},t||{})},n.get=function(){return e(r,i)},n.$get=[function(){return n.get()}],n})}(angular),!function(e){"use strict";var t=e.module("common.locale",["ngLocale"]);t.directive("translate",["T",function(e){return{restrict:"AE",scope:{translate:"@",count:"=?",params:"=?"},template:'<span ng-bind="getTranslatedText()"></span>',link:function(t,n,r){t.getTranslatedText=function(){var n,r,i=t.params;return i||0===i||(i=[]),Array.isArray(i)||(i=[i]),t.count||0===t.count?(n=e).pluralize.apply(n,$traceurRuntime.spread([t.translate,t.count],i)):(r=e).translate.apply(r,$traceurRuntime.spread([t.translate],i))}}}}]),t.factory("T",["locale","$log",function(e,t){function n(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o,c,s=e.dictionary||{};return s.hasOwnProperty(n)?n=s[n]:t.debug('Translate for string "'+n+'" for locale "'+e.id+'" is not defined'),o=0,c=function(){return o>=r.length&&(o=0),r[o++]||""},(n||"").replace(/(%s)/gi,function(){return c()+""})}function r(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var c,s,a,u,l=e.dictionary||{},f=e.plural;return r=r||0,f||(t.debug('Plural function for locale "'+e.id+'" is not defined'),f=function(e){return 1===e?"one":"other"}),c=l[n],c&&"object"==typeof c?(s=f(r),c.hasOwnProperty(s)||(t.debug('Plural for category "'+s+'" for string "'+n+'" for locale "'+e.id+'" is not defined'),s="other"),c.hasOwnProperty(s)&&(n=c[s])):t.debug('Plural for string "'+n+'" for locale "'+e.id+'" is not defined'),a=0,u=function(){return a>=i.length&&(a=0),(i[a++]||"")+""},(n||"").replace(/(%n|\{n})/gi,function(){return r+""}).replace(/(%s)/gi,function(){return u()+""})}var i;return i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"number"==typeof e[0]?r.apply(void 0,$traceurRuntime.spread([e[1],e[0]],e.slice(2))):n.apply(void 0,$traceurRuntime.spread(e))},i.translate=i.t=n,i.pluralize=i.tn=r,i}]),t.provider("locale",function(){var e="en",t={};this.locale=function(t){e=t},this.dictionary=function(e){t=e||{}},this.$get=["$locale",function(n){return{id:e,dictionary:t,plural:n.pluralCat}}]})}(angular),!function(e){"use strict";var t=e.module("common.common",["ngSanitize","ngTouch","ngAnimate","ui.router","common.extensions","common.config","common.locale","digestLogger"]);t.run(["config","locale","debug","$injector",function(e,t,n,r){n.enabled=n.enabled&&e.debug.enabled,n.ns("config")(e),n.ns("locale")(t),r.get("page")}]),e.module("common.common").config(["configProvider",function(e){e.defaults({debug:{enabled:!1},page:{baseUrl:"",title:""}})}]),e.module("common.common").config(["localeProvider",function(e){e.locale("en"),e.dictionary({Hello:"Hello","%s cat":{one:"%s cat",other:"%s %n cats"}})}]),t.config(["configProvider",function(e){e({debug:{enabled:!1,ns:{}},router:{html5Mode:!0},sce:{enabled:!0}})}]),t.config(["$locationProvider","$sceProvider","configProvider",function(e,t,n){var r;r=n.get(),e.html5Mode(r.router.html5Mode),t.enabled(r.sce.enabled)}]),t.service("page",[function(){}]),t.factory("copyObject",[function(){return e.copy}]),t.service("debug",["config",function(e){var t,n,r={};t=function(e){var t;return t=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(e=t).log.apply(e,$traceurRuntime.spread(n))},Object.defineProperty(t,"enabled",{get:function(){return this._enabled&&n._enabled},set:function(e){this._enabled=e},enumerable:!0,configurable:!0}),t.enabled=!1,t.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(e&&t.unshift(e),console.log.apply(console,t))},t},n=new t,n.ns=function(e){return e?r.hasOwnProperty(e)?r[e]:r[e]=new t(e):this};var i=e.debug||{},o=i.ns||{};return n.enabled=i.enabled||!1,Object.keys(o).forEach(function(e){var t=o[e]||{};n.ns(e).enabled=t.enabled||!1}),n}]),t.factory("mergeObjects",[function(){function e(e){function t(e,n){return!e||!n||"object"!=typeof e||"object"!=typeof n||Array.isArray(e)||Array.isArray(n)||e instanceof Date||n instanceof Date?n:(Object.keys(n).forEach(function(r){e[r]=e.hasOwnProperty(r)?t(e[r],n[r]):n[r]}),e)}for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.reduce(function(e,n){return t(e,n)},e)}return e}]),t.service("path",[function(){this.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?e.map(function(e){return String(e||"").trim()}).reduce(function(e,t){var n,r;for(r=e.length-1,n=0;r>=0&&"/"==e[r];r--)n++;for(;n>0&&t.length>0&&"/"==t[0];n--)t=t.slice(1);return e&&t&&"/"!=e[e.length-1]&&"/"!=t[0]&&(e+="/"),e+t}):""}}])}(angular);