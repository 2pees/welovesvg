!function(n){"use strict";var e=n.module("panel.panel",["common.common","panel.extensions","webicon"]);n.module("panel.panel").config(["configProvider",function(n){n.defaults({debug:{enabled:!1},page:{baseUrl:"",title:"We Love SVG"}})}]),n.module("panel.panel").config(["localeProvider",function(n){n.locale("en"),n.dictionary({Hello:"Hello","%s cat":{one:"%s cat",other:"%s %n cats"}})}]),e.config(["configProvider",function(n){n({collections:{names:["font-awesome","flat-color-icons","foundation-icons","material-icons","glyphicons","icomoon-free","ionicons","webhostinghub-glyphs","entypo","elusive-icons","mfglabs-iconset","raphael-icons","simple-line-icons","weather-icons","ligaturesymbols","wpf-ui-framework-icons","linecons","meteocons","metrize-icons","octicons","open-iconic","openwebicons","stroke7","typicons","zocial","brandico","fontelico","maki","stateface"]}})}]),e.directive("collectionIcons",[function(){return{restrict:"E",scope:{collection:"="},templateUrl:"components/collectionIcons.html"}}]),e.directive("collectionSelect",[function(){return{restrict:"E",templateUrl:"components/collectionSelect.html",scope:{collections:"="}}}]),e.directive("page",[function(){return{restrict:"E",templateUrl:"components/page.html"}}]),e.directive("searchIconsPanel",["ViewIconCollections","config",function(n,e){return{restrict:"E",templateUrl:"components/searchIconsPanel.html",link:function(t){t.search="",t.collections=new n(e.collections.names),t.$watch("search",function(){t.collections.search(t.search)})}}}]),e.directive("searchInput",[function(){return{restrict:"E",scope:{search:"="},templateUrl:"components/searchInput.html"}}]),e.directive("spinner",[function(){return{restrict:"E",templateUrl:"components/spinner.html"}}]),e.factory("Icon",["humanize",function(n){var e=function(){function e(n){this.id=n,this.init()}return $traceurRuntime.createClass(e,{init:function(){this.label=n(this.id)}},{})}();return e}]),e.factory("IconCollection",["EventEmitterFactory","humanize","lunr",function(n,e,t){var i=function(n){function i(n){$traceurRuntime.superConstructor(i).call(this),this.id=n,this.icons=[],this.idIndex=new Map,this.init()}return $traceurRuntime.createClass(i,{init:function(){this.label=e(this.id),this.initSearchIndex()},initSearchIndex:function(){this.searchIndex=t(function(){this.field("label"),this.field("id"),this.ref("id")})},clear:function(){this.icons.length=0},addIcons:function(){var n,e=void 0!==arguments[0]?arguments[0]:[],t=this;(n=this.icons).push.apply(n,$traceurRuntime.spread(e)),e.forEach(function(n){t.searchIndex.add(n),t.idIndex.set(n.id,n)}),this.emit("update")},search:function(n){var e=this;return n||0===n?this.searchIndex.search(n).map(function(n){return e.idIndex.get(n.ref)}):this.icons.slice()}},{},n)}(n);return i}]),e.factory("IconCollectionRemote",["IconCollection","Icon","$webicon","$q",function(n,e,t,i){var c=function(n){function c(n){$traceurRuntime.superConstructor(c).call(this,n)}return $traceurRuntime.createClass(c,{init:function(){$traceurRuntime.superGet(this,c.prototype,"init").call(this),this.promise=i.when(),this.initialized=!1,this.pending=!1},loadCollection:function(){var n,c=this;return this.promise.cancel&&this.promise.cancel(),this.pending=!0,n=this.promise=i.when(t.preload([this.id]).iconSets[this.id]).then(function(t){var i,o;return n&&n.cancelled?c:(c.pending=!1,i=t&&t.hasOwnProperty("collection")?t.collection:t||[],o=Array.from(i.filter(function(n){return n&&n._resource&&n._resource.icons}).map(function(n){return Object.keys(n._resource.icons)}).reduce(function(n,e){return(e||[]).forEach(function(e){return n.add(e)}),n},new Set)).map(function(n){return new e(n)}),c.clear(),c.addIcons(o),c.initialized=!0,c)}),n.cancel=function(){return n.cancelled=!0},n}},{},n)}(n);return c}]),e.factory("ViewIcon",[function(){var n=function(){function n(n){this.icon=n,this.init()}return $traceurRuntime.createClass(n,{init:function(){this.visible=!0}},{})}();return n}]),e.factory("ViewIconCollection",["ViewIcon","IconCollection","IconCollectionRemote",function(n,e,t){var i=function(){function i(n){this.init(),this.setCollection(n)}return $traceurRuntime.createClass(i,{setCollection:function(n){var i=this;n instanceof e||(n=new t(n)),this.collection=n,this.clearViews(),this.addIcons(n.icons),this.collection.on("update",function(){i.clearViews(),i.addIcons(i.collection.icons)})},clearViews:function(){this.views.length=0},addIcons:function(e){this.addViews(e.map(function(e){return new n(e)}))},addViews:function(n){var e;(e=this.views).push.apply(e,$traceurRuntime.spread(n))},init:function(){this.collection=null,this.views=[],this.visible=!0},search:function(n){var e,t;return e=this.collection.search(n),t=new Set(e.map(function(n){return n.id})),this.views.forEach(function(n){n.visible=t.has(n.icon.id)}),this}},{})}();return i}]),e.factory("ViewIconCollections",["ViewIconCollection","IconCollectionRemote",function(n,e){var t=function(){function t(n){this.init(),this.setCollections(n)}return $traceurRuntime.createClass(t,{init:function(){this.views=[],this.current=null,this.searchText=null},clear:function(){this.views.length=0,this.current=null},setCollections:function(n){var e=this;this.clear(),(n||[]).forEach(function(n){return e.addCollection(n)})},addCollection:function(e){var t;t=new n(e),this.views.push(t),this.current||this.setCurrent(t)},isCurrent:function(n){return this.current===n},setCurrent:function(n){var t=this;this.current=n,n.collection instanceof e&&!n.collection.initialized?n.collection.loadCollection().then(function(){t.searchText&&n.search(t.searchText)}):this.searchText&&this.current.search(this.searchText)},search:function(n){this.searchText=n,this.current&&this.current.search(n)}},{})}();return t}]),e.config(["$provide",function(n){n.decorator("page",["$delegate",function(n){var e=n;return e}])}]),e.factory("lunr",function(){return lunr}),n.module("panel.panel").run(["$templateCache",function(n){n.put("components/collectionIcons.html",'<div ng-if="collection.collection.pending"><center><spinner></spinner></center></div><div ng-if="!collection.collection.pending"><div ng-repeat="icon in ::collection.views track by icon.icon.id" ng-show="icon.visible" style="display: inline-block; width: 60px; text-align: center; vertical-align: top;" class="icon"><webicon icon="{{::collection.collection.id}}:{{::icon.icon.id}}" style="height: 40px; width: 40px"></webicon><div style="font-size: .7em" class="text-muted">{{::icon.icon.label}}</div></div></div>'),n.put("components/collectionSelect.html",'<button ng-repeat="item in collections.views track by item.collection.id" ng-class="{\'btn-primary\': collections.isCurrent(item), \'btn-default\': !collections.isCurrent(item)}" ng-click="collections.setCurrent(item)">{{::item.collection.label}}</button>'),n.put("components/page.html",'<search-icons-panel></search-icons-panel><center><span>by</span> <a href="https://icons8.com">Icons8</a><br/></center>'),n.put("components/searchIconsPanel.html",'<div class="header"><h1>We Love SVG<sup>Î²</sup></h1><div class="row"><div class="col-md-10 col-md-offset-1"><collection-select collections="collections"></collection-select></div><div class="col-md-6 col-md-offset-3"><search-input search="search"></search-input></div></div></div><div class="body"><div class="col-md-10 col-md-offset-1"><collection-icons search="search" collection="collections.current"></collection-icons></div></div>'),n.put("components/searchInput.html",'<input type="text" ng-model="search" placeholder="Search"/>'),n.put("components/spinner.html",'<div class="spinner">Loading...</div>')}])}(angular);